<!-- HUGE THANKS TO THEBOOKOFSHADERS
TODO: PUT A PROPER REFERENCE
-->

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

        <link type="text/css" rel="stylesheet" href="https://dotkokott.github.io/glslEditor/build/glslEditor.css">
        <script type="application/javascript" src="https://dotkokott.github.io/glslEditor/build/glslEditor.js"></script>

        <link type="text/css" rel="stylesheet" href="../css/style.css">
    </head>
    <body>
        <div id="header">
            <h1>Building blocks</h1>
        </div>
        <section>
            <h2>
                <a id='hello_world' href='#hello_world'>Uniforms &amp; Varying</a>
            </h2>
            <div class="editor_wrap" data="../shaders/02_variables_1.frag" id="glsl_editor1"></div>
            <ul>
              <li>
                  <a target="_blank" href="http://www.shaderific.com/glsl-types">Variable type reference</a>
              </li>
              <li>
                <a target="_blank" href="http://www.shaderific.com/glsl-functions/">Functions reference</a>
              </li>
            </ul>
        </section>
        <section>
            <h2>
                <a id='hello_world' href='#hello_world'>Uniforms &amp; Varying</a>
            </h2>

            <div class="editor_wrap" data="../shaders/02_variables_2.frag" id="glsl_editor1"></div>
            <ul>
                <li>
                    <h3>Uniforms – have same value for each pixel (fragment)</h3>
                    <p>Example:
                       Screen resolution, mouse coordinates only defined once for the whole program and therefore same for each pixel.
                       Same for time.
                       By agreement, in this environment all uniform variables have <b>u_</b> prefix – <b>u_time</b>, <b>u_mouse</b>.
                    </p>
                </li>
                <li>
                    <h3>Varying – have different value for each pixel (fragment)</h3>
                </li>
                <li>
                    <h3>Default (system) inputs/outputs – <u>gl_FragColor</u>, <u>gl_FragCoord</u></h3>
                </li>
            </ul>

            <p>
               By default uniform values are not normalized!
               Ex: <b>u_mouse</b> can have values ranging from 0 to 1440 for instance.
               That's the reasoning for passing screen resolution as uniform – <b>u_resolution</b>
            </p>
        </section>

        <section>
          <h3>Useful links</h3>
          <ul>
            <li>
                <a href="http://tobyschachman.com/Shadershop/" target="_blank">http://tobyschachman.com/Shadershop/</a>
            </li>
            <li>
                <a href="http://tobyschachman.com/Shadershop/" target="_blank">http://tobyschachman.com/Shadershop/</a>
            </li>
          </ul>
        </section>
    </body>
    <script type="text/javascript">
        var editors = document.querySelectorAll(".editor_wrap");
    	for(var i = 0; i < editors.length; i++){

            var editor = new GlslEditor(editors[i], {
                canvas_size: 250,
                canvas_follow: true,
                canvas_float: 'right',
                theme: 'monokai',
                tooltips: true,
                exportIcon: true,
                useWebcam: editors[i].hasAttribute("data-camera")
            });

            if (editors[i].hasAttribute("data")) {
                var srcFile = editors[i].getAttribute("data");
                editor.open(srcFile);
            }

            if(editors[i].hasAttribute("data-solution")) {
                var link = document.createElement('a');
                link.classList.add('solution_link');
                link.textContent = "Show / Hide solution";
                editors[i].appendChild(link);

                var sol_div = document.createElement('div');
                sol_div.classList.add('editor_wrap');
                sol_div.setAttribute('id', editors[i].id + '_solution');
                $(editors[i]).after(sol_div);

                var solutionEditor = new GlslEditor(sol_div, {
                    canvas_size: 250,
                    canvas_follow: true,
                    canvas_float: 'right',
                    theme: 'monokai',
                    tooltips: true,
                    exportIcon: true,
                    useWebcam: editors[i].hasAttribute("data-camera")
                });

                $(link).click(function () {
                    $(sol_div).toggle('slow', function() {
                        var canv = $(this).find('.ge_canvas').width(250).height(250);
                    });
                });

                solutionEditor.open(editors[i].getAttribute("data-solution"));

                $(sol_div).hide();
            }
        }
    </script>
</html>
